# 产品需求文档 (PRD): 基于小说的多集视频生成

## 1. 概述
本功能旨在支持系统根据单一的长篇输入（如小说）生成系列视频（目标为 10 集）。该功能致力于自动化长篇故事的可视化过程，同时保持各集之间的叙事连贯性和视觉一致性。

## 2. 问题陈述
目前，系统仅设计用于单视频生成。
- **输入限制**：用户每次只能处理一个“视频骨架”。
- **一致性问题**：如果分别生成 10 集视频，同一实体（如“主角”）在第 1 集和第 2 集中的外观和场景设计往往不一致。
- **工作流摩擦**：手动输入并协调 10 个独立的视频制作过程非常繁琐。

## 3. 目标
- **自动分段**：自动将小说拆分为约 10 个剧集/章节。
- **视觉一致性**：确保所有剧集中角色和关键场景（地点）保持相同的视觉描述和原型。
- **统一工作流**：提供单一的小说入口，最终生成一个包含 10 个剧集的管理列表。

## 4. 用户故事
- **故事分析**：作为创作者，我希望输入一本小说，让 AI 提取主要角色和重复出现的场景，以便在生成剧集之前批准“剧集圣经（Series Bible）”。
- **剧集规划**：作为创作者，我希望看到所有 10 集的大纲，以确保节奏正确。
- **批量生成**：作为创作者，我希望生成所有剧集的分镜头，并确信“角色 A”在每个分镜头中都是一致的。

## 5. 功能需求

### 5.1 输入与分析（“剧集圣经”）
- **输入**：用于粘贴小说内容的文本区域。
- **提取**：AI 分析全文以生成“剧集圣经”：
    - **全局角色**：姓名、描述、视觉原型（一致的 Prompt）。
    - **全局场景**：地点名称、描述、视觉原型。
    - **艺术风格**：系列的整体视觉风格。
- **审核**：用户可以在继续之前编辑/微调圣经。

### 5.2 剧集规划
- **分段**：AI 将小说拆分为 10 个逻辑剧集/片段。
- **输出**：10 个剧集摘要的列表。

### 5.3 剧集生成
- **输入**：剧集摘要 + 剧集圣经。
- **过程**：为每一集生成 `VideoSkeleton`。
    - **约束**：当剧集需要“角色 A”时，必须使用剧集圣经中的定义。
    - **新资产**：如果某集引入了一次性角色/场景，则在该集中本地生成。

### 5.4 数据管理
- 将 `SeriesBible` 与单个 `Episode` 骨架分开存储。
- 将剧集链接到圣经。

## 6. UX/UI 需求
- **系列仪表盘**：查看所有 10 个剧集。
- **圣经编辑器**：一个专门的区域，用于管理全局角色和场景。
- **一致性检查**：视觉指示器，显示角色已链接到全局圣经。

## 7. 成功指标
- 用户可以生成 10 集视频，其中主角的描述在第 1 集和第 10 集的 Prompt 中完全相同。
- 与 10 次单独会话相比，创建系列视频的时间减少。
